{"version":3,"file":"index.min.js","sources":["../src/index.js"],"sourcesContent":["function urlCheck(url, errorImage, el) {\r\n  // checks if url exists and puts url in src\r\n  if (errorImage) {\r\n    fetch(url).then(response => {\r\n      if (response.status == 200) {\r\n        el.src = url;\r\n      } else if (response.status == 404) {\r\n        el.src = errorImage;\r\n      }\r\n    });\r\n  } else {\r\n    el.src = url;\r\n  }\r\n}\r\n\r\nexport default {\r\n  install(Vue, options) {\r\n    let margin = \"0px 0px 100px 0px\";\r\n    let fadeIn = false;\r\n    let directive = \"lazyLoad\";\r\n    let errorLoadImage = false;\r\n    if (options) {\r\n      margin = options.margin ? options.margin : \"0px 0px 100px 0px\";\r\n      fadeIn = options.fadeIn ? options.fadeIn : false;\r\n      directive = options.directive ? options.directive : \"lazyLoad\";\r\n      errorLoadImage = options.errorImg ? options.errorImg : false;\r\n      if (options.cssAnimate) {\r\n        const animateCss = document.createElement(\"link\");\r\n        animateCss.rel = \"text/css\";\r\n        animateCss.href =\r\n          \"https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css\";\r\n        document.head.appendChild(animateCss);\r\n\r\n        fadeIn = false;\r\n      }\r\n    }\r\n    Vue.directive(directive, {\r\n      bind(el, binding) {\r\n        if (fadeIn) {\r\n          el.style.opacity = \"0\";\r\n          el.style.transition = fadeIn;\r\n        }\r\n        const observer = new IntersectionObserver(\r\n          (entries, observer) => {\r\n            entries.forEach(entry => {\r\n              if (entry.isIntersecting) {\r\n                if (binding.value.animation) {\r\n                  urlCheck(binding.value.url, errorLoadImage, el);\r\n                  if (options.cssAnimate) {\r\n                    el.classList.add(\"animated\", ...binding.value.animation);\r\n                  }\r\n                } else {\r\n                  urlCheck(binding.value, errorLoadImage, el);\r\n                }\r\n                fadeIn ? (el.style.opacity = \"1\") : null;\r\n                observer.unobserve(entry.target);\r\n              }\r\n            });\r\n          },\r\n          { rootMargin: margin }\r\n        );\r\n        observer.observe(el);\r\n      }\r\n    });\r\n  }\r\n};\r\n"],"names":["urlCheck","url","errorImage","el","fetch","then","response","status","src","install","Vue","options","margin","fadeIn","directive","errorLoadImage","errorImg","cssAnimate","animateCss","document","createElement","rel","href","head","appendChild","bind","binding","style","opacity","transition","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","value","animation","classList","add","unobserve","target","rootMargin","observe"],"mappings":";;;;;8dAAA,SAASA,SAASC,EAAKC,EAAYC,GAE7BD,EACFE,MAAMH,GAAKI,KAAK,SAAAC,GACS,KAAnBA,EAASC,OACXJ,EAAGK,IAAMP,EACmB,KAAnBK,EAASC,SAClBJ,EAAGK,IAAMN,KAIbC,EAAGK,IAAMP,EAIb,UAAe,CACbQ,iBAAQC,EAAKC,OACPC,EAAS,oBACTC,GAAS,EACTC,EAAY,WACZC,GAAiB,KACjBJ,IACFC,EAASD,EAAQC,OAASD,EAAQC,OAAS,oBAC3CC,IAASF,EAAQE,QAASF,EAAQE,OAClCC,EAAYH,EAAQG,UAAYH,EAAQG,UAAY,WACpDC,IAAiBJ,EAAQK,UAAWL,EAAQK,SACxCL,EAAQM,YAAY,KAChBC,EAAaC,SAASC,cAAc,QAC1CF,EAAWG,IAAM,WACjBH,EAAWI,KACT,2EACFH,SAASI,KAAKC,YAAYN,GAE1BL,GAAS,EAGbH,EAAII,UAAUA,EAAW,CACvBW,cAAKtB,EAAIuB,GACHb,IACFV,EAAGwB,MAAMC,QAAU,IACnBzB,EAAGwB,MAAME,WAAahB,GAEP,IAAIiB,qBACnB,SAACC,EAASC,GACRD,EAAQE,QAAQ,SAAAC,MACVA,EAAMC,eAAgB,UACpBT,EAAQU,MAAMC,cAChBrC,SAAS0B,EAAQU,MAAMnC,IAAKc,EAAgBZ,GACxCQ,EAAQM,cACVd,EAAGmC,WAAUC,aAAI,sCAAeb,EAAQU,MAAMC,kBAGhDrC,SAAS0B,EAAQU,MAAOrB,EAAgBZ,GAE1CU,IAAUV,EAAGwB,MAAMC,QAAU,KAC7BI,EAASQ,UAAUN,EAAMO,YAI/B,CAAEC,WAAY9B,IAEP+B,QAAQxC"}