{"version":3,"file":"index.min.js","sources":["../src/index.js"],"sourcesContent":["function urlCheck(url, errorImage, el, className) {\r\n  // checks if url exists and puts url in src\r\n  if (errorImage) {\r\n    fetch(url).then(response => {\r\n      if (response.status == 200) {\r\n        el.src = url;\r\n      } else {\r\n        el.classList.add(className);\r\n        el.src = errorImage;\r\n      }\r\n    });\r\n  } else {\r\n    el.src = url;\r\n  }\r\n}\r\n\r\nexport default {\r\n  install(Vue, options) {\r\n    let margin = \"0px 0px 100px 0px\";\r\n    let fadeIn = false;\r\n    let directive = \"lazyLoad\";\r\n    let errorLoadImage = false;\r\n    let errorClass = \"imageFailed\";\r\n    if (options) {\r\n      margin = options.margin ? options.margin : \"0px 0px 100px 0px\";\r\n      fadeIn = options.fadeIn ? options.fadeIn : false;\r\n      directive = options.directive ? options.directive : \"lazyLoad\";\r\n      errorLoadImage = options.errorImg ? options.errorImg : false;\r\n      errorClass = options.errorClass ? options.errorClass : \"imageFailed\";\r\n      if (options.cssAnimate) {\r\n        const animateCss = document.createElement(\"link\");\r\n        animateCss.rel = \"text/css\";\r\n        animateCss.href =\r\n          \"https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css\";\r\n        document.head.appendChild(animateCss);\r\n\r\n        fadeIn = false;\r\n      }\r\n    }\r\n    Vue.directive(directive, {\r\n      bind(el, binding) {\r\n        if (\r\n          \"loading\" in document.createElement(\"img\") &&\r\n          options === undefined\r\n        ) {\r\n          el.src = binding.value;\r\n          el.setAttribute(\"loading\", \"lazy\");\r\n        } else {\r\n          if (fadeIn) {\r\n            el.style.opacity = \"0\";\r\n            el.style.transition = fadeIn;\r\n          }\r\n          const observer = new IntersectionObserver(\r\n            (entries, observer) => {\r\n              entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                  if (binding.value.animation) {\r\n                    urlCheck(binding.value.url, errorLoadImage, el, errorClass);\r\n                    if (options.cssAnimate) {\r\n                      el.classList.add(\"animated\", ...binding.value.animation);\r\n                    }\r\n                  } else {\r\n                    urlCheck(binding.value, errorLoadImage, el, errorClass);\r\n                  }\r\n                  fadeIn ? (el.style.opacity = \"1\") : null;\r\n                  observer.unobserve(entry.target);\r\n                }\r\n              });\r\n            },\r\n            { rootMargin: margin }\r\n          );\r\n          observer.observe(el);\r\n        }\r\n      }\r\n    });\r\n  }\r\n};\r\n"],"names":["urlCheck","url","errorImage","el","className","fetch","then","response","status","src","classList","add","install","Vue","options","margin","fadeIn","directive","errorLoadImage","errorClass","errorImg","cssAnimate","animateCss","document","createElement","rel","href","head","appendChild","bind","binding","undefined","value","setAttribute","style","opacity","transition","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","animation","unobserve","target","rootMargin","observe"],"mappings":";;;;;8dAAA,SAASA,SAASC,EAAKC,EAAYC,EAAIC,GAEjCF,EACFG,MAAMJ,GAAKK,KAAK,SAAAC,GACS,KAAnBA,EAASC,OACXL,EAAGM,IAAMR,GAETE,EAAGO,UAAUC,IAAIP,GACjBD,EAAGM,IAAMP,KAIbC,EAAGM,IAAMR,EAIb,UAAe,CACbW,iBAAQC,EAAKC,OACPC,EAAS,oBACTC,GAAS,EACTC,EAAY,WACZC,GAAiB,EACjBC,EAAa,iBACbL,IACFC,EAASD,EAAQC,OAASD,EAAQC,OAAS,oBAC3CC,IAASF,EAAQE,QAASF,EAAQE,OAClCC,EAAYH,EAAQG,UAAYH,EAAQG,UAAY,WACpDC,IAAiBJ,EAAQM,UAAWN,EAAQM,SAC5CD,EAAaL,EAAQK,WAAaL,EAAQK,WAAa,cACnDL,EAAQO,YAAY,KAChBC,EAAaC,SAASC,cAAc,QAC1CF,EAAWG,IAAM,WACjBH,EAAWI,KACT,2EACFH,SAASI,KAAKC,YAAYN,GAE1BN,GAAS,EAGbH,EAAII,UAAUA,EAAW,CACvBY,cAAK1B,EAAI2B,GAEL,YAAaP,SAASC,cAAc,aACxBO,IAAZjB,GAEAX,EAAGM,IAAMqB,EAAQE,MACjB7B,EAAG8B,aAAa,UAAW,UAEvBjB,IACFb,EAAG+B,MAAMC,QAAU,IACnBhC,EAAG+B,MAAME,WAAapB,GAEP,IAAIqB,qBACnB,SAACC,EAASC,GACRD,EAAQE,QAAQ,SAAAC,MACVA,EAAMC,eAAgB,UACpBZ,EAAQE,MAAMW,cAChB3C,SAAS8B,EAAQE,MAAM/B,IAAKiB,EAAgBf,EAAIgB,GAC5CL,EAAQO,cACVlB,EAAGO,WAAUC,aAAI,sCAAemB,EAAQE,MAAMW,kBAGhD3C,SAAS8B,EAAQE,MAAOd,EAAgBf,EAAIgB,GAE9CH,IAAUb,EAAG+B,MAAMC,QAAU,KAC7BI,EAASK,UAAUH,EAAMI,YAI/B,CAAEC,WAAY/B,IAEPgC,QAAQ5C"}